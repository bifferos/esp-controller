<!DOCTYPE html>
<html>
<head>
    <title>Checkbox File Toggle</title>
    <style>
        label {
            display: block;
            margin-bottom: 8px;
        }
    </style>
    <script>
        function toggleCheckbox(cb, name) {
            fetch('/toggle', {
                method: 'POST',
                headers: {'Content-Type': 'application/x-www-form-urlencoded'},
                body: 'name=' + encodeURIComponent(name) + '&checked=' + cb.checked
            }).then(() => {
                window.location = '/';
            });
        }
    </script>
</head>
<body>
<h2>Device enabler</h2>
<form>
    {{range .}}
    <label>
        <input type="checkbox" onchange="toggleCheckbox(this, '{{.Name}}')" {{if .Checked}}checked{{end}}>
        {{.Name}}
    </label><br>
    {{end}}
</form>
</body>
</html>
